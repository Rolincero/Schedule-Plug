
#### **Назначение проекта**

Устройство представляет собой "умную" розетку на базе микроконтроллера ESP32, которая:

- Управляет подключенным устройством через реле по расписанию.
- Контролирует температуру с помощью датчика DS18B20 и отключает нагрузку при перегреве.
- Отображает данные на OLED-экране и 7-сегментном индикаторе TM1637.
- Позволяет настраивать расписание, время, Wi-Fi через веб-интерфейс и физический энкодер.
- Синхронизирует время через NTP-сервер.

---
#### **Использованные библиотеки**

1. **Wire.h** — для работы с I²C.
2. **RTClib.h** — управление модулем реального времени RTC DS3231.
3. **OneWire.h**, **DallasTemperature.h** — взаимодействие с датчиком температуры DS18B20.
4. **WiFi.h**, **WebServer.h** — подключение к Wi-Fi и создание веб-сервера.
5. **Preferences.h** — сохранение настроек в энергонезависимой памяти.
6. **WiFiUdp.h**, **NTPClient.h** — синхронизация времени через NTP.
7. **SSD1306Wire.h** — управление OLED-дисплеем.
8. **ESP32Encoder.h** — обработка сигналов энкодера.
9. **TM1637Display.h** — управление 7-сегментным дисплеем TM1637.
10. **fontsRus.h** — пользовательский шрифт с поддержкой кириллицы.

---

**Конфигурация пинов:**

~~~ cpp
#define TM1637_CLK 18      // CLK для TM1637
#define TM1637_DIO 19      // DIO для TM1637
#define TEMP_PIN 4         // Датчик DS18B20
#define GPIO_CONTROL 5     // Реле
#define ENCODER_CLK 23     // Энкодер (CLK)
#define ENCODER_DT 25      // Энкодер (DT)
#define ENCODER_SW 26      // Кнопка энкодера
#define I2C_SDA 21         // OLED SDA
#define I2C_SCL 22         // OLED SCL
~~~

**1. Аппаратные компоненты:**

- Микроконтроллер: **ESP32**.
- Модуль RTC: **DS3231**.
- Датчик температуры: **DS18B20**.
- Дисплеи: **OLED 128x64 (I²C)**, **TM1637 (7-сегментный)**.
- Энкодер: **EC11** с кнопкой.
- Реле: 5В/220В.

**2. Функционал:**

- **Управление по расписанию:** Настройка времени включения/выключения для каждого дня недели.
- **Термозащита:** Автоматическое отключение при превышении 75°C.
- **Синхронизация времени:** Через NTP-сервер при подключении к Wi-Fi.
- **Веб-интерфейс:** Настройка расписания через браузер (IP-адрес выводится на OLED).
- **Меню на OLED:** Навигация с помощью энкодера, калибровка температуры, настройка Wi-Fi.

- **Индикация:**
    - TM1637: текущая температура или ближайшее время включения.
    - OLED: время, день недели, статус Wi-Fi, состояние реле.

**3. Настройка:**

1. Загрузите код в ESP32 через PlatformIO/Arduino IDE.
2. Подключите компоненты согласно схеме.
3. Настройте Wi-Fi (SSID и пароль в коде).
4. Используйте энкодер для настройки времени и расписания.

**4. Сборка:**

- Схема подключения:
    
``` 
DS18B20 → GPIO4  
TM1637 CLK → GPIO18, 
DIO → GPIO19  
OLED SDA → GPIO21, 
SCL → GPIO22  
Энкодер CLK → GPIO23, 
DT → GPIO25, 
SW → GPIO26  
Реле → GPIO5  
```

**5. Веб-интерфейс:**

- Доступ через `http://<IP_ESP32>`.
- Форма для настройки расписания на каждый день.

**6. Лицензия:**  
Проект распространяется под лицензией **MIT**.